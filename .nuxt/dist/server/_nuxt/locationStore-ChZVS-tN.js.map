{"version":3,"file":"locationStore-ChZVS-tN.js","sources":["../../../../stores/locationStore.js"],"sourcesContent":["// src/stores/locationStore.js\nimport { defineStore } from \"pinia\"\nimport { ref } from \"vue\"\n\nexport const useLocationStore = defineStore(\"location\", () => {\n  const location = ref(null)\n  const nextTodayLocation = ref(null)\n\n  const setLocation = (newLocation) => {\n    location.value = newLocation\n  }\n\n  const fetchTodayLocation = async () => {\n    try {\n      const today = new Date().toISOString().split(\"T\")[0]\n      const res = await fetch(`https://api.lafriteattaque.fr/planning-date?date=${today}`)\n      const data = await res.json()\n\n      location.value = Array.isArray(data) && data.length > 0 ? data[0] : null\n    } catch (err) {\n      console.error(\"Erreur lors de la récupération du planning :\", err)\n      location.value = null\n    }\n  }\n\n  const fetchNextTodayLocation = async () => {\n    try {\n      const today = new Date().toISOString().split(\"T\")[0]\n      const res = await fetch(`https://api.lafriteattaque.fr/planning-next-today?date=${today}`)\n      const data = await res.json()\n\n      nextTodayLocation.value = data && data.adresse ? data : null\n    } catch (err) {\n      console.error(\"Erreur de récupération de l’événement suivant :\", err)\n      nextTodayLocation.value = null\n    }\n  }\n\n  const currentEvent = ref(null)\n\nconst fetchCurrentEvent = async () => {\n  try {\n    const today = new Date().toISOString().split(\"T\")[0]\n    const res = await fetch(`https://api.lafriteattaque.fr/planning-now?date=${today}`)\n    const data = await res.json()\n    currentEvent.value = data && data.adresse ? data : null\n  } catch (err) {\n    console.error(\"Erreur récupération event en cours :\", err)\n    currentEvent.value = null\n  }\n}\n\n\n  return {\n  location,\n  nextTodayLocation,\n  currentEvent,\n  setLocation,\n  fetchTodayLocation,\n  fetchNextTodayLocation,\n  fetchCurrentEvent\n}\n\n})\n"],"names":[],"mappings":";;AAIa,MAAA,mBAAmB,YAAY,YAAY,MAAM;AACtD,QAAA,WAAW,IAAI,IAAI;AACnB,QAAA,oBAAoB,IAAI,IAAI;AAE5B,QAAA,cAAc,CAAC,gBAAgB;AACnC,aAAS,QAAQ;AAAA,EACnB;AAEA,QAAM,qBAAqB,YAAY;AACjC,QAAA;AACI,YAAA,6BAAY,KAAK,GAAE,cAAc,MAAM,GAAG,EAAE,CAAC;AACnD,YAAM,MAAM,MAAM,MAAM,oDAAoD,KAAK,EAAE;AAC7E,YAAA,OAAO,MAAM,IAAI,KAAK;AAEnB,eAAA,QAAQ,MAAM,QAAQ,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,CAAC,IAAI;AAAA,aAC7D,KAAK;AACJ,cAAA,MAAM,gDAAgD,GAAG;AACjE,eAAS,QAAQ;AAAA,IAAA;AAAA,EAErB;AAEA,QAAM,yBAAyB,YAAY;AACrC,QAAA;AACI,YAAA,6BAAY,KAAK,GAAE,cAAc,MAAM,GAAG,EAAE,CAAC;AACnD,YAAM,MAAM,MAAM,MAAM,0DAA0D,KAAK,EAAE;AACnF,YAAA,OAAO,MAAM,IAAI,KAAK;AAE5B,wBAAkB,QAAQ,QAAQ,KAAK,UAAU,OAAO;AAAA,aACjD,KAAK;AACJ,cAAA,MAAM,mDAAmD,GAAG;AACpE,wBAAkB,QAAQ;AAAA,IAAA;AAAA,EAE9B;AAEM,QAAA,eAAe,IAAI,IAAI;AAE/B,QAAM,oBAAoB,YAAY;AAChC,QAAA;AACI,YAAA,6BAAY,KAAK,GAAE,cAAc,MAAM,GAAG,EAAE,CAAC;AACnD,YAAM,MAAM,MAAM,MAAM,mDAAmD,KAAK,EAAE;AAC5E,YAAA,OAAO,MAAM,IAAI,KAAK;AAC5B,mBAAa,QAAQ,QAAQ,KAAK,UAAU,OAAO;AAAA,aAC5C,KAAK;AACJ,cAAA,MAAM,wCAAwC,GAAG;AACzD,mBAAa,QAAQ;AAAA,IAAA;AAAA,EAEzB;AAGS,SAAA;AAAA,IACP;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAEA,CAAC;"}