import{k as L,H as V,J as R,K as I,z as k,L as J,M as K,r as D,c as d,o as f,a as t,F as w,f as S,t as b,u as _,b as h,j as U,w as X,e as E,g as Y,_ as G,N as Q}from"./Cp8LerWh.js";import{_ as j}from"./CAxyiBT8.js";import T from"./D-SKwFVO.js";import{_ as W,g as Z}from"./BD2Mh6qX.js";import{_ as tt}from"./DfUy1aIn.js";import{u as A}from"./CnENRTk-.js";function et(o,s){const a=s/o*100;return 2/Math.PI*100*Math.atan(a/50)}function st(o={}){const{duration:s=2e3,throttle:a=200,hideDelay:i=500,resetDelay:c=400}=o,l=o.estimatedProgress||et,r=L(),e=I(0),n=I(!1),u=I(!1);let m=!1,p,g,$,C;const F=(x={})=>{z(),u.value=!1,P(0,x)};function P(x=0,v={}){if(r.isHydrating)return;if(x>=100)return N({force:v.force});M(),e.value=x<0?0:x;const y=v.force?0:a;y?g=setTimeout(()=>{n.value=!0,H()},y):(n.value=!0,H())}function B(){$=setTimeout(()=>{n.value=!1,C=setTimeout(()=>{e.value=0},c)},i)}function N(x={}){e.value=100,m=!0,M(),z(),x.error&&(u.value=!0),x.force?(e.value=0,n.value=!1):B()}function z(){clearTimeout($),clearTimeout(C)}function M(){clearTimeout(g),cancelAnimationFrame(p)}function H(){m=!1;let x;function v(y){if(m)return;x??(x=y);const O=y-x;e.value=Math.max(0,Math.min(100,l(s,O))),p=requestAnimationFrame(v)}p=requestAnimationFrame(v)}let q=()=>{};{const x=r.hook("page:loading:start",()=>{F()}),v=r.hook("page:loading:end",()=>{N()}),y=r.hook("vue:error",()=>N());q=()=>{y(),x(),v(),M()}}return{_cleanup:q,progress:k(()=>e.value),isLoading:k(()=>n.value),error:k(()=>u.value),start:F,set:P,finish:N,clear:M}}function nt(o={}){const s=L(),a=s._loadingIndicator||(s._loadingIndicator=st(o));return V()&&(s._loadingIndicatorDeps||(s._loadingIndicatorDeps=0),s._loadingIndicatorDeps++,R(()=>{s._loadingIndicatorDeps--,s._loadingIndicatorDeps===0&&(a._cleanup(),delete s._loadingIndicator)})),a}const ot=J({name:"NuxtLoadingIndicator",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},hideDelay:{type:Number,default:500},resetDelay:{type:Number,default:400},height:{type:Number,default:3},color:{type:[String,Boolean],default:"repeating-linear-gradient(to right,#00dc82 0%,#34cdfe 50%,#0047e1 100%)"},errorColor:{type:String,default:"repeating-linear-gradient(to right,#f87171 0%,#ef4444 100%)"},estimatedProgress:{type:Function,required:!1}},setup(o,{slots:s,expose:a}){const{progress:i,isLoading:c,error:l,start:r,finish:e,clear:n}=nt({duration:o.duration,throttle:o.throttle,hideDelay:o.hideDelay,resetDelay:o.resetDelay,estimatedProgress:o.estimatedProgress});return a({progress:i,isLoading:c,error:l,start:r,finish:e,clear:n}),()=>K("div",{class:"nuxt-loading-indicator",style:{position:"fixed",top:0,right:0,left:0,pointerEvents:"none",width:"auto",height:`${o.height}px`,opacity:c.value?1:0,background:l.value?o.errorColor:o.color||void 0,backgroundSize:`${100/i.value*100}% auto`,transform:`scaleX(${i.value}%)`,transformOrigin:"left",transition:"transform 0.1s, height 0.4s, opacity 0.4s",zIndex:999999}},s)}}),at={class:"px-28 py-2 bg-beige flex justify-between items-center"},rt={class:""},it={class:"flex space-x-6"},lt=["href"],ct={class:"flex items-center space-x-10"},ut={class:"flex space-x-3 items-center"},dt={class:"flex space-x-2"},ft=["href"],mt={__name:"Header",setup(o){const s=D([{text:"accueil",to:"/"},{text:"la carte",to:"/la-carte"},{text:"la privatisation",to:"/la-privatisation"},{text:"nos emplacements",to:"/nos-emplacements"}]),{$socials:a}=L();return(i,c)=>{const l=T;return f(),d("div",at,[c[1]||(c[1]=t("div",null,[t("a",{href:"/"},[t("img",{class:"w-3/5 object-cover",src:j,alt:""})])],-1)),t("div",rt,[t("ul",it,[(f(!0),d(w,null,S(_(s),(r,e)=>(f(),d("li",{key:e},[t("a",{class:"capitalize text-sm transition-all duration-500 hover:text-red",href:r.to},b(r.text),9,lt)]))),128))])]),t("div",ct,[t("div",ut,[c[0]||(c[0]=t("a",{class:"transform transition duration-500 hover:-rotate-3 hover:border-b-10 text-sm py-2.5 px-4 border-x-5 border-t-5 border-b-8 rounded-xl block border-black",href:"/contact"}," Contact ",-1)),h(W,{text:"Commander",isolateClass:"hidden w-fit text-base bg-red hover:bg-orange"})]),t("div",null,[t("ul",dt,[(f(!0),d(w,null,S(_(a),(r,e)=>(f(),d("li",{class:"transform transition duration-500 hover:bg-red size-10 aspect-square text-white bg-orange rounded-full",key:e},[t("a",{class:"text-xl flex items-center justify-center w-full h-full",href:r.to,target:"_blank"},[h(l,{name:r.icon},null,8,["name"])],8,ft)]))),128))])])])])}}},pt={class:"py-2 bg-beige relative"},ht={class:"px-5 top-0 flex justify-between items-center w-full"},xt={key:0,class:"py-5 px-5 top-0 fixed z-50 bg-beige w-full h-screen"},gt={class:"top-0 flex justify-end items-center w-full"},_t={class:"pt-10"},vt={class:"flex flex-col space-y-3"},yt=["href"],bt={class:"mt-5 flex flex-col items-start space-y-5"},wt={class:"flex space-x-2"},$t=["href"],kt={__name:"MobileHeader",setup(o){const s=D(!1),a=D([{text:"accueil",to:"/"},{text:"la carte",to:"/la-carte"},{text:"la privatisation",to:"/la-privatisation"},{text:"nos emplacements",to:"/nos-emplacements"},{text:"contact",to:"/contact"}]),{$socials:i}=L();return(c,l)=>{const r=tt,e=T;return f(),d("div",pt,[t("div",ht,[h(r,{to:"/"},{default:X(()=>l[2]||(l[2]=[t("img",{class:"w-1/2 object-cover",src:j,alt:""},null,-1)])),_:1}),t("div",{onClick:l[0]||(l[0]=n=>s.value=!0),class:"cursor-pointer"},[h(e,{class:"text-5xl",name:"iwwa:menu"})])]),_(s)?(f(),d("div",xt,[t("div",gt,[t("div",{onClick:l[1]||(l[1]=n=>s.value=!1),class:"cursor-pointer"},[h(e,{class:"text-5xl",name:"material-symbols-light:close"})])]),t("div",_t,[t("ul",vt,[(f(!0),d(w,null,S(_(a),(n,u)=>(f(),d("li",{key:u},[t("a",{class:"capitalize text-base transition-all duration-500 hover:text-red",href:n.to},b(n.text),9,yt)]))),128))])]),t("div",bt,[t("div",null,[t("ul",wt,[(f(!0),d(w,null,S(_(i),(n,u)=>(f(),d("li",{class:"transform transition duration-500 hover:bg-red size-10 aspect-square text-white bg-orange rounded-full",key:u},[t("a",{class:"text-xl flex items-center justify-center w-full h-full",href:n.to,target:"_blank"},[h(e,{name:n.icon},null,8,["name"])],8,$t)]))),128))])])])])):U("",!0)])}}},Dt={class:"bg-red py-10 px-5 xl:px-28"},St={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 justify-between w-full gap-8 mt-10"},Lt={class:"space-y-2 md:col-span-2 text-center"},Nt={key:0,class:"text-white text-lg"},Mt={key:1,class:"text-center leading-snug"},jt={class:"text-black font-extrabold text-lg"},It={class:"text-white italic font-extrabold text-lg"},Tt={key:2,class:"text-white text-lg italic"},Ct={class:"space-y-2"},Ft={class:"flex"},Pt={class:"space-y-2"},zt={class:"text-white font-poppins flex items-center space-x-1",href:""},Ht={class:"text-white font-poppins flex items-center space-x-1",href:""},qt={class:"space-y-2"},Et={class:"flex"},At={class:"flex space-x-2"},Bt=["href"],Ot={__name:"Footer",setup(o){const s=A(),a=k(()=>s.currentEvent),i=k(()=>s.nextTodayLocation);E(()=>{s.fetchCurrentEvent(),s.fetchNextTodayLocation()});const{$socials:c}=L(),l=r=>{if(!r)return"";const[e,n]=r.split(":").map(Number),u=new Date,m=new Date;m.setHours(e,n,0,0);const p=Math.floor((m-u)/1e3);if(p<=0)return"quelques instants";const g=Math.floor(p/3600),$=Math.floor(p%3600/60);return`${g>0?`${g}h`:""}${$>0?`${$}min`:""}`};return(r,e)=>{var u,m;const n=T;return f(),d("div",Dt,[e[10]||(e[10]=t("div",{class:"flex flex-col justify-center items-center"},[t("a",{href:"/"},[t("img",{class:"object-cover",src:j,alt:""})]),t("p",{class:"font-poppins text-white md:w-1/2 text-center text-sm"}," La Frite Attaque, votre traiteur & food truck de rÃ©fÃ©rence Ã  Lyon, Roanne, Saint-Etienne, Macon, Bourg en Bresse... chez vous : en RhÃ´ne Alpes ")],-1)),t("div",St,[t("div",Lt,[e[3]||(e[3]=t("p",{class:"font-poppins text-white"},"Notre adresse du jour (pour manger)",-1)),(u=a.value)!=null&&u.adresse?(f(),d("h3",Nt,b(a.value.adresse)+" â€“ "+b(a.value.city),1)):(m=i.value)!=null&&m.adresse?(f(),d("h3",Mt,[e[0]||(e[0]=t("span",{class:"text-white text-sm not-italic font-normal"}," Plus que ",-1)),t("span",jt,b(l(i.value.time_start)),1),e[1]||(e[1]=t("span",{class:"text-white text-sm not-italic font-normal"}," Ã  attendre pour manger ",-1)),e[2]||(e[2]=t("br",null,null,-1)),t("span",It,b(i.value.adresse)+" â€“ "+b(i.value.city),1)])):(f(),d("h3",Tt," Aujourdâ€™hui, le food truck est en repos ðŸ˜´ ")),e[4]||(e[4]=t("div",{class:"flex justify-center py-4"},[t("a",{class:"hidden bg-white px-6 rounded-full text-sm text-azure py-2.5",href:""}," Commander ")],-1))]),e[9]||(e[9]=Y('<div class="space-y-2"><h3 class="text-white text-lg">Infos</h3><div class="flex"><ul class="space-y-2"><li><a class="hover:text-orange transition-all text-white font-poppins" href="/la-carte">Notre carte</a></li><li><a class="hover:text-orange transition-all text-white font-poppins" href="/la-privatisation">La Privatisation</a></li><li><a class="hover:text-orange transition-all text-white font-poppins" href="/la-carte-privatisation">Carte pour la privatisation</a></li><li><a class="hover:text-orange transition-all text-white font-poppins" href="/landing">Bienvenue</a></li><li><a class="hover:text-orange transition-all text-white font-poppins" href="/landing">Page contact</a></li></ul></div></div>',1)),t("div",Ct,[e[7]||(e[7]=t("h3",{class:"text-white text-lg"},"Contact",-1)),t("div",Ft,[t("ul",Pt,[t("li",null,[t("a",zt,[h(n,{name:"hugeicons:mail-open",width:"24",height:"24",style:{color:"#fff"}}),e[5]||(e[5]=t("span",null,"contact@lafriteattaque.fr",-1))])]),t("li",null,[t("a",Ht,[h(n,{name:"tabler:phone-ringing",width:"24",height:"24",style:{color:"#fff"}}),e[6]||(e[6]=t("span",null,"06.56.66.59.81",-1))])])])])]),t("div",qt,[e[8]||(e[8]=t("h3",{class:"text-white text-lg"},"Suivez-nous",-1)),t("div",Et,[t("ul",At,[(f(!0),d(w,null,S(_(c),(p,g)=>(f(),d("li",{key:g,class:"transform transition duration-500 hover:bg-blue size-10 aspect-square text-white bg-orange rounded-full"},[t("a",{class:"text-xl flex items-center justify-center w-full h-full",href:p.to,target:"_blank"},[h(n,{name:p.icon},null,8,["name"])],8,Bt)]))),128))])])])])])}}},Vt={matin:{start:"00:00",end:"11:59"},midi:{start:"12:00",end:"14:59"},"apres-midi":{start:"15:00",end:"16:59"},soir:{start:"17:00",end:"23:59"}};function Rt(o,s=Vt){const[a,i]=o.split(":").map(Number),c=a*60+i;for(const l in s){const[r,e]=s[l].start.split(":").map(Number),[n,u]=s[l].end.split(":").map(Number),m=r*60+e,p=n*60+u;if(c>=m&&c<=p)return l}return"hors plage"}function Jt(){const o=new Date,s=String(o.getHours()).padStart(2,"0"),a=String(o.getMinutes()).padStart(2,"0");return`${s}:${a}`}function Kt(o){const s=o.getFullYear(),a=String(o.getMonth()+1).padStart(2,"0"),i=String(o.getDate()).padStart(2,"0");return`${s}-${a}-${i}`}async function Ut(){const s=D(),a=Jt(),i=Rt(a);let c=0,l=!1;for(;!l&&c<14;){const r=new Date;r.setDate(r.getDate()+c);const e=Kt(r);try{const n=await Z(`planning-date?date=${e}`);if(n.length>0){let u=n.find(m=>m.moment===i);if(!u){const m=["matin","midi","apres-midi","soir"],p=m.indexOf(i);u=n.find(g=>m.indexOf(g.moment)>p),!u&&n.length>0&&(u=n[0])}u&&(s.value=u,l=!0)}c++}catch(n){console.error(`Erreur chargement planning pour ${e}`,n);break}}return s.value||console.warn("Aucune location trouvÃ©e dans les 14 prochains jours."),s.value}const Xt={key:0,class:"flex flex-col justify-between"},Yt={class:"hidden xl:block top-0"},Gt={class:"xl:hidden top-0"},Qt={class:"relative bottom-0"},Wt={key:1,class:"bg-beige h-screen flex items-center justify-center"},Zt={__name:"default",setup(o){const s=A(),a=D(!0);return E(async()=>{const i=await Ut();a.value=!1,i&&(s.setLocation(i),a.value=!1)}),(i,c)=>{const l=ot,r=Q;return f(),d(w,null,[h(l,{color:"#eab308"}),a.value?(f(),d("div",Wt,c[0]||(c[0]=[t("img",{class:"animate-spin-slow w-20 md:w-28 object-cover",src:j,alt:""},null,-1)]))):(f(),d("div",Xt,[t("div",Yt,[h(_(mt))]),t("div",Gt,[h(_(kt))]),h(r),t("div",Qt,[h(_(Ot))])]))],64)}}},re=G(Zt,[["__scopeId","data-v-269847b8"]]);export{re as default};
